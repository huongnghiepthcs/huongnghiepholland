const questions = {
  "K·ªπ thu·∫≠t": [
    {
      question:
        "N·∫øu c√≥ ƒë·ªß c∆° h·ªôi v√† ngu·ªìn l·ª±c, b·∫°n c√≥ th√≠ch h·ªçc c√¥ng ngh·ªá (th·ª≠ l·∫Øp r√°p ƒë·ªì ƒë·∫°c, m√°y m√≥c, v.v.)",
    },
    {
      question:
        "N·∫øu c√≥ ƒë·ªß c∆° h·ªôi v√† ngu·ªìn l·ª±c, b·∫°n c√≥ th√≠ch thao t√°c tr√™n m√°y t√≠nh ƒë·ªÉ gi·∫£i tr√≠ ho·∫∑c h·ªçc t·∫≠p",
    },
    {
      question:
        "N·∫øu c√≥ ƒë·ªß c∆° h·ªôi v√† ngu·ªìn l·ª±c, b·∫°n c√≥ th√≠ch s·ª≠a ch·ªØa v·∫≠t d·ª•ng/ƒë·ªì d√πng c√° nh√¢n",
    },
    {
      question:
        "N·∫øu c√≥ ƒë·ªß c∆° h·ªôi v√† ngu·ªìn l·ª±c, b·∫°n c√≥ th√≠ch c√†i ƒë·∫∑t v√† ki·ªÉm tra ·ª©ng d·ª•ng tr√™n ƒëi·ªán tho·∫°i ho·∫∑c m√°y t√≠nh",
    },
    {
      question:
        "N·∫øu c√≥ ƒë·ªß c∆° h·ªôi v√† ngu·ªìn l·ª±c, b·∫°n c√≥ th√≠ch chu·∫©n b·ªã v√† l·∫Øp r√°p v·∫≠t d·ª•ng c·∫Øm tr·∫°i, d√£ ngo·∫°i, tr·∫°i h√®",
    },
  ],
  "Nghi√™n c·ª©u": [
    {
      question:
        "N·∫øu c√≥ ƒë·ªß c∆° h·ªôi v√† ngu·ªìn l·ª±c, b·∫°n c√≥ th√≠ch t√¨m hi·ªÉu v·ªÅ ch·ªß ƒë·ªÅ m√¨nh th√≠ch qua s√°ch b√°o ho·∫∑c video",
    },
    {
      question:
        "N·∫øu c√≥ ƒë·ªß c∆° h·ªôi v√† ngu·ªìn l·ª±c, b·∫°n c√≥ th√≠ch nghi√™n c·ª©u c√°ch gi·∫£i quy·∫øt v·∫•n ƒë·ªÅ m√† m√¨nh quan t√¢m",
    },
    {
      question:
        "N·∫øu c√≥ ƒë·ªß c∆° h·ªôi v√† ngu·ªìn l·ª±c, b·∫°n c√≥ th√≠ch quan s√°t v√† ph√¢n t√≠ch s·ª± v·∫≠t ho·∫∑c h√†nh vi con ng∆∞·ªùi",
    },
    {
      question:
        "N·∫øu c√≥ ƒë·ªß c∆° h·ªôi v√† ngu·ªìn l·ª±c, b·∫°n c√≥ th√≠ch ƒë·∫∑t c√¢u h·ªèi v·ªÅ ch·ªß ƒë·ªÅ m√¨nh h·ª©ng th√∫",
    },
    {
      question:
        "N·∫øu c√≥ ƒë·ªß c∆° h·ªôi v√† ngu·ªìn l·ª±c, b·∫°n c√≥ th√≠ch l√Ω gi·∫£i v·∫•n ƒë·ªÅ trong cu·ªôc s·ªëng m·ªôt c√°ch h·ª£p l√Ω (logic)",
    },
  ],
  "Nghi·ªáp v·ª•": [
    {
      question:
        "N·∫øu c√≥ ƒë·ªß c∆° h·ªôi v√† ngu·ªìn l·ª±c, b·∫°n c√≥ th√≠ch s·∫Øp x·∫øp v√† ghi ch√∫ b√†i h·ªçc theo quy t·∫Øc",
    },
    {
      question:
        "N·∫øu c√≥ ƒë·ªß c∆° h·ªôi v√† ngu·ªìn l·ª±c, b·∫°n c√≥ th√≠ch tu√¢n th·ªß lu·∫≠t l·ªá, quy t·∫Øc c·ªßa tr∆∞·ªùng l·ªõp",
    },
    {
      question:
        "N·∫øu c√≥ ƒë·ªß c∆° h·ªôi v√† ngu·ªìn l·ª±c, b·∫°n c√≥ th√≠ch d·ªçn d·∫πp v√† s·∫Øp x·∫øp b√†n h·ªçc ƒë·ªãnh k·ª≥",
    },
    {
      question:
        "N·∫øu c√≥ ƒë·ªß c∆° h·ªôi v√† ngu·ªìn l·ª±c, b·∫°n c√≥ th√≠ch th·ª±c hi·ªán c√°c vi·ªác c√° nh√¢n theo l·ªãch c·ªë ƒë·ªãnh",
    },
    {
      question:
        "N·∫øu c√≥ ƒë·ªß c∆° h·ªôi v√† ngu·ªìn l·ª±c, b·∫°n c√≥ th√≠ch l√†m vi·ªác theo s√°t quy tr√¨nh, k·∫ø ho·∫°ch",
    },
  ],
  "Ngh·ªá thu·∫≠t": [
    {
      question:
        "N·∫øu c√≥ ƒë·ªß c∆° h·ªôi v√† ngu·ªìn l·ª±c, b·∫°n c√≥ th√≠ch tham gia c√¢u l·∫°c b·ªô √¢m nh·∫°c, h·ªôi h·ªça, vƒÉn ngh·ªá",
    },
    {
      question:
        "N·∫øu c√≥ ƒë·ªß c∆° h·ªôi v√† ngu·ªìn l·ª±c, b·∫°n c√≥ th√≠ch m√¥ t·∫£ c√°c √Ω t∆∞·ªüng b·∫±ng h√†nh ƒë·ªông",
    },
    {
      question:
        "N·∫øu c√≥ ƒë·ªß c∆° h·ªôi v√† ngu·ªìn l·ª±c, b·∫°n c√≥ th√≠ch S√°ng t·∫°o n·ªôi dung (√¢m nh·∫°c, b√†i vƒÉn, tranh ·∫£nh, v.v.) theo c·∫£m h·ª©ng",
    },
    {
      question: "N·∫øu c√≥ ƒë·ªß c∆° h·ªôi v√† ngu·ªìn l·ª±c, b·∫°n c√≥ th√≠ch h·ªçc ch∆°i nh·∫°c c·ª•",
    },
    {
      question:
        "N·∫øu c√≥ ƒë·ªß c∆° h·ªôi v√† ngu·ªìn l·ª±c, b·∫°n c√≥ th√≠ch ph√°c h·ªça v√† v·∫Ω tranh",
    },
  ],
  "X√£ h·ªôi": [
    {
      question:
        "N·∫øu c√≥ ƒë·ªß c∆° h·ªôi v√† ngu·ªìn l·ª±c, b·∫°n c√≥ th√≠ch gi·∫£ng h√≤a cu·ªôc tranh c√£i gi·ªØa nh·ªØng ng∆∞·ªùi b·∫°n",
    },
    {
      question:
        "N·∫øu c√≥ ƒë·ªß c∆° h·ªôi v√† ngu·ªìn l·ª±c, b·∫°n c√≥ th√≠ch s·∫µn s√†ng gi√∫p ƒë·ª° m·ªçi ng∆∞·ªùi xung quanh",
    },
    {
      question:
        "N·∫øu c√≥ ƒë·ªß c∆° h·ªôi v√† ngu·ªìn l·ª±c, b·∫°n c√≥ th√≠ch gi√∫p b·∫°n b√® v∆∞·ª£t qua tr·ªü ng·∫°i trong h·ªçc t·∫≠p",
    },
    {
      question:
        "N·∫øu c√≥ ƒë·ªß c∆° h·ªôi v√† ngu·ªìn l·ª±c, b·∫°n c√≥ th√≠ch l√†m vui l√≤ng ng∆∞·ªùi kh√°c",
    },
    {
      question:
        "N·∫øu c√≥ ƒë·ªß c∆° h·ªôi v√† ngu·ªìn l·ª±c, b·∫°n c√≥ th√≠ch quan t√¢m ƒë·∫øn c·∫£m x√∫c c·ªßa ng∆∞·ªùi xung quanh",
    },
  ],
  "Qu·∫£n l√Ω": [
    {
      question:
        "N·∫øu c√≥ ƒë·ªß c∆° h·ªôi v√† ngu·ªìn l·ª±c, b·∫°n c√≥ th√≠ch tr√¨nh b√†y th√¥ng tin tr∆∞·ªõc l·ªõp",
    },
    {
      question:
        "N·∫øu c√≥ ƒë·ªß c∆° h·ªôi v√† ngu·ªìn l·ª±c, b·∫°n c√≥ th√≠ch giao nhi·ªám v·ª• cho th√†nh vi√™n trong nh√≥m",
    },
    {
      question:
        "N·∫øu c√≥ ƒë·ªß c∆° h·ªôi v√† ngu·ªìn l·ª±c, b·∫°n c√≥ th√≠ch ƒë·∫£m nhi·ªám vai tr√≤ qu·∫£n l√Ω l·ªõp (l·ªõp tr∆∞·ªüng, l·ªõp ph√≥, v.v.)",
    },
    {
      question:
        "N·∫øu c√≥ ƒë·ªß c∆° h·ªôi v√† ngu·ªìn l·ª±c, b·∫°n c√≥ th√≠ch xung phong l√†m nh√≥m tr∆∞·ªüng",
    },
    {
      question:
        "N·∫øu c√≥ ƒë·ªß c∆° h·ªôi v√† ngu·ªìn l·ª±c, b·∫°n c√≥ th√≠ch d·∫´n   ƒë·∫ßu, d·∫´n d·∫Øt ng∆∞·ªùi kh√°c",
    },
  ],
};

const parts = [
  "K·ªπ thu·∫≠t",
  "Nghi√™n c·ª©u",
  "Nghi·ªáp v·ª•",
  "Ngh·ªá thu·∫≠t",
  "X√£ h·ªôi",
  "Qu·∫£n l√Ω",
];
let currentPartIndex = 0;
let currentQuestionIndex = 0;
let scores = parts.reduce((acc, part) => ({ ...acc, [part]: 0 }), {});
let selectedScore = null;
let currentFontSize = 16;
let preliminaryAnswer = null;
let selectedCareerGroup = null;

const satisfactionOptions = [
  { text: "R·∫•t th√≠ch ü•∞", points: 5 },
  { text: "Th√≠ch üòä", points: 4 },
  { text: "B√¨nh th∆∞·ªùng ü§î", points: 3 },
  { text: "Kh√¥ng th√≠ch üôÅ", points: 2 },
  { text: "R·∫•t kh√¥ng th√≠ch üò°", points: 1 },
];

function displayQuestion() {
  const currentPart = parts[currentPartIndex];
  const quizContainer = document.getElementById("quizContainer");
  quizContainer.innerHTML = "";

  const question = questions[currentPart][currentQuestionIndex];

  const questionTitle = document.createElement("h3");
  questionTitle.textContent = `Ph·∫ßn ${currentPart} - C√¢u h·ªèi ${
    currentQuestionIndex + 1
  }:`;
  quizContainer.appendChild(questionTitle);

  const questionText = document.createElement("p");
  questionText.textContent = question.question;
  questionText.style.fontSize = `${currentFontSize}px`; // Set dynamic font size
  quizContainer.appendChild(questionText);

  const optionsList = document.createElement("ul");
  optionsList.classList.add("options-list");

  satisfactionOptions.forEach((option) => {
    const optionItem = document.createElement("li");
    const button = document.createElement("button");
    button.classList.add("option");
    button.textContent = option.text;
    button.onclick = () => selectAnswer(option.points, button);
    optionItem.appendChild(button);
    optionsList.appendChild(optionItem);
  });

  quizContainer.appendChild(optionsList);

  const navigationContainer = document.createElement("div");
  navigationContainer.classList.add("navigation-container");

  const backButton = document.createElement("button");
  backButton.id = "backButton";
  backButton.textContent = "Quay l·∫°i";
  backButton.classList.add("nav-button");
  backButton.disabled = currentQuestionIndex === 0 && currentPartIndex === 0; // Disabled on the first question of the first part
  backButton.onclick = moveToPreviousQuestion;
  navigationContainer.appendChild(backButton);

  const nextButton = document.createElement("button");
  nextButton.id = "nextButton";
  nextButton.textContent = "Ti·∫øp theo";
  nextButton.classList.add("nav-button");
  nextButton.disabled = true; // Initially disabled
  nextButton.onclick = moveToNextQuestion;
  navigationContainer.appendChild(nextButton);

  quizContainer.appendChild(navigationContainer);
}

function selectAnswer(points, button) {
  selectedScore = points;

  const options = document.querySelectorAll(".option");
  options.forEach((option) => option.classList.remove("selected"));
  button.classList.add("selected");

  document.getElementById("nextButton").disabled = false;
}

function moveToPreviousQuestion() {
  if (currentQuestionIndex > 0) {
    currentQuestionIndex--;
  } else if (currentPartIndex > 0) {
    currentPartIndex--;
    currentQuestionIndex = questions[parts[currentPartIndex]].length - 1;
  }
  displayQuestion();
}

function moveToNextQuestion() {
  if (selectedScore !== null) {
    scores[parts[currentPartIndex]] += selectedScore;
    selectedScore = null;
  }
  currentQuestionIndex++;
  if (currentQuestionIndex >= questions[parts[currentPartIndex]].length) {
    if (currentPartIndex < parts.length - 1) {
      showTransitionScreen();
    } else {
      displayResult();
    }
  } else {
    displayQuestion();
  }
}

function showTransitionScreen() {
  const quizContainer = document.getElementById("quizContainer");
  quizContainer.innerHTML = `
        <h3>B·∫°n s·∫Øp b·∫Øt ƒë·∫ßu Ph·∫ßn ${parts[currentPartIndex + 1]}</h3>
        <p>Nh·∫•n n√∫t "B·∫Øt ƒë·∫ßu" ƒë·ªÉ ti·∫øp t·ª•c b√†i tr·∫Øc nghi·ªám.</p>
        <button id="startNextPartButton" class="start-part-button">B·∫Øt ƒë·∫ßu Ph·∫ßn ${
          parts[currentPartIndex + 1]
        }</button>
    `;

  document.getElementById("startNextPartButton").onclick = () => {
    currentPartIndex++;
    currentQuestionIndex = 0;
    if (currentPartIndex == parts.length) {
      displayResult();
    } else {
      displayQuestion();
    }
  };
}

const partDetails = {
  "K·ªπ thu·∫≠t": `<h3 class='title'>ƒê·∫∑c ƒëi·ªÉm c·ªßa nh·ªØng ng∆∞·ªùi thu·ªôc nh√≥m K·ªπ thu·∫≠t</h3>
        <p>L√† nh√≥m ng∆∞·ªùi th·ª±c t·∫ø, ∆∞a h√†nh ƒë·ªông h∆°n suy nghƒ©, th√≠ch kh√°m ph√°...</p>
        <p><strong>ƒêi·ªÉm m·∫°nh:</strong> L√† nh·ªØng ng∆∞·ªùi trung th·ª±c, th·∫≥ng th·∫Øn v√† ki√™n tr√¨ trong c√¥ng vi·ªác.</p>
        <p><strong>ƒêi·ªÉm c·∫ßn kh·∫Øc ph·ª•c:</strong> ƒêa ph·∫ßn ng∆∞·ªùi thu·ªôc nh√≥m k·ªπ thu·∫≠t b·ªôc tr·ª±c, h∆°i kh√¥ khan v√† kh√¥ng gi·ªèi giao ti·∫øp.</p>
        <p><strong>Ng√†nh ngh·ªÅ:</strong> C∆° kh√≠, √î t√¥, ƒêi·ªán t·ª≠, ƒêi·ªán l·∫°nh; M√°y t√≠nh, C√¥ng ngh·ªá th√¥ng tin; X√¢y d·ª±ng,‚Ä¶</p>
        <p><strong>Tr·∫£i nghi·ªám ·ªü l·ªõp, tr∆∞·ªùng:</strong> Th·ª±c h√†nh s·ª≠a c√°c v·∫≠t d·ª•ng ƒë∆°n gi·∫£n</p>
        <p><strong>C√°c m√¥n h·ªçc c·∫ßn ph√°t huy:</strong> C√¥ng ngh·ªá, v·∫≠t l√Ω, sinh h·ªçc,‚Ä¶</p>
        <p><strong>·ªû l·ªõp:</strong> Tham gia th·ª±c h√†nh c√°c m√¥n nh∆∞ V·∫≠t l√Ω, C√¥ng ngh·ªá ho·∫∑c th·ªÉ d·ª•c, h·ªó tr·ª£ gi√°o vi√™n s·ª≠a ch·ªØa ho·∫∑c chu·∫©n b·ªã th√≠ nghi·ªám</p>
        <p><strong>·ªû tr∆∞·ªùng:</strong> Tham gia c√¢u l·∫°c b·ªô k·ªπ thu·∫≠t, ch·∫ø t·∫°o m√¥ h√¨nh, ho·∫∑c c√°c ho·∫°t ƒë·ªông v·ªÅ khoa h·ªçc ·ª©ng d·ª•ng. Th·ª≠ s·ª©c trong c√°c cu·ªôc thi s√°ng t·∫°o robot, m√¥ h√¨nh c∆° kh√≠.</p>
        <p><strong>·ªû nh√†:</strong>S·ª≠a ch·ªØa ƒë·ªì d√πng gia ƒë√¨nh ho·∫∑c t·ª± l√†m c√°c d·ª± √°n DIY (Do-It-Yourself). Tr·ªìng c√¢y, l√†m v∆∞·ªùn, chƒÉm s√≥c th√∫ c∆∞ng </p>
        `,
  "Nghi√™n c·ª©u": `<h3 class='title'>ƒê·∫∑c ƒëi·ªÉm c·ªßa nh·ªØng ng∆∞·ªùi thu·ªôc nh√≥m Nghi√™n c·ª©u</h3>
        <p>Th√≠ch ph√¢n t√≠ch, nghi√™n c·ª©u s√¢u m·ªçi v·∫•n ƒë·ªÅ...</p>
        <p><strong>ƒêi·ªÉm m·∫°nh:</strong> ·ªç th√≠ch l√†m vi·ªác v·ªõi √Ω t∆∞·ªüng ho·∫∑c d·ªØ li·ªáu ƒë·ªÉ s√°ng t·∫°o n√™n nh·ªØng gi·∫£i ph√°p m·ªõi; c√≥ kh·∫£ nƒÉng quan s√°t, ph√¢n t√≠ch, ƒë√°nh gi√° v·∫•n ƒë·ªÅ m·ªôt c√°ch logic v√† c√≥ h·ªá th·ªëng.</p>
        <p><strong>ƒêi·ªÉm c·∫ßn kh·∫Øc ph·ª•c:</strong> Th√≠ch c√°c ho·∫°t ƒë·ªông c√° nh√¢n ho·∫∑c l√†m vi·ªác trong nh√≥m nh·ªè.</p>
        <p><strong>Ng√†nh ngh·ªÅ:</strong> Nh√† nghi√™n c·ª©u Khoa h·ªçc; K·ªπ s∆∞ m√°y t√≠nh; B√°c sƒ©, D∆∞·ª£c sƒ©,‚Ä¶</p>
        <p><strong>Tr·∫£i nghi·ªám ·ªü l·ªõp, tr∆∞·ªùng:</strong> Tr·∫£i nghi·ªám tham gia nghi√™n c·ª©u khoa h·ªçc</p>
        <p><strong>C√°c m√¥n h·ªçc c·∫ßn ph√°t huy:</strong> To√°n, khoa h·ªçc t·ª± nhi√™n, tin h·ªçc, ngo·∫°i ng·ªØ,‚Ä¶</p>
        <p><strong>·ªû l·ªõp:</strong>Tham gia c√°c b√†i t·∫≠p y√™u c·∫ßu ph√¢n t√≠ch d·ªØ li·ªáu ho·∫∑c th√≠ nghi·ªám khoa h·ªçc. ƒê·∫∑t c√¢u h·ªèi ho·∫∑c tr√¨nh b√†y quan ƒëi·ªÉm c√° nh√¢n v·ªÅ v·∫•n ƒë·ªÅ khoa h·ªçc.</p>
        <p><strong>·ªû tr∆∞·ªùng:</strong>Gia nh·∫≠p c√°c c√¢u l·∫°c b·ªô nghi√™n c·ª©u khoa h·ªçc ho·∫∑c c√¢u l·∫°c b·ªô STEM. Tham gia c√°c cu·ªôc thi h·ªçc thu·∫≠t nh∆∞ Olympic To√°n, H√≥a, Sinh, ho·∫∑c tin h·ªçc.</p>
        <p><strong>·ªû nh√†:</strong>ƒê·ªçc s√°ch chuy√™n ng√†nh, t√†i li·ªáu h·ªçc thu·∫≠t ho·∫∑c xem c√°c ch∆∞∆°ng tr√¨nh khoa h·ªçc.T·ª± l√†m c√°c th√≠ nghi·ªám nh·ªè, s·ª≠ d·ª•ng c√¥ng c·ª• nh∆∞ k√≠nh hi·ªÉn vi, ph·∫ßn m·ªÅm l·∫≠p tr√¨nh. </p>
        `,
  "Nghi·ªáp v·ª•": `<h3 class='title'>ƒê·∫∑c ƒëi·ªÉm c·ªßa nh·ªØng ng∆∞·ªùi thu·ªôc nh√≥m Nghi·ªáp v·ª•</h3>
        <p>C√≥ t·ªï ch·ª©c, logic, ƒë·ªãnh h∆∞·ªõng chi ti·∫øt...</p>
        <p><strong>ƒêi·ªÉm m·∫°nh:</strong> T·∫≠n t√¢m, l·ªãch s·ª± v√† r·∫•t ki√™n tr√¨ v·ªõi m·ª•c ti√™u c·ªßa m√¨nh, </p>
        <p><strong>ƒêi·ªÉm c·∫ßn kh·∫Øc ph·ª•c:</strong> C·∫ßu to√†n trong c√¥ng vi·ªác c≈©ng nh∆∞ mu·ªën l√†m ng∆∞·ªùi kh√°c h√†i l√≤ng n√™n r·∫•t d·ªÖ b·ªã cƒÉng th·∫≥ng v√† √°p l·ª±c </p>
        <p><strong>Ng√†nh ngh·ªÅ:</strong> K·∫ø to√°n, ki·ªÉm to√°n, thu·∫ø, nh√¢n vi√™n ng√¢n h√†ng, gi√°o vi√™n,‚Ä¶</p>
        <p><strong>Tr·∫£i nghi·ªám ·ªü l·ªõp, tr∆∞·ªùng:</strong> C√°c tr·ªçng tr√°ch quan tr·ªçng: Th·ªß qu·ª∑, gi·ªØ s·ªï ƒë·∫ßu b√†i</p>
        <p><strong>C√°c m√¥n h·ªçc c·∫ßn ph√°t huy:</strong> Tin h·ªçc, to√°n, ngo·∫°i ng·ªØ, gi√°o d·ª•c c√¥ng d√¢n,‚Ä¶</p>
        <p><strong>·ªû l·ªõp:</strong> H·ªó tr·ª£ gi√°o vi√™n qu·∫£n l√Ω t√†i li·ªáu, s·ªï s√°ch ho·∫∑c l√†m th∆∞ k√Ω nh√≥m. Luy·ªán t·∫≠p l√†m b√†i t·∫≠p logic, th·ªëng k√™, ho·∫∑c qu·∫£n l√Ω th·ªùi gian.</p>
        <p><strong>·ªû tr∆∞·ªùng:</strong> Tham gia c√°c c√¢u l·∫°c b·ªô v·ªÅ qu·∫£n tr·ªã vƒÉn ph√≤ng, theo d√µi s·ªï s√°ch qu·ªπ, ho·∫∑c ph√¢n t√≠ch d·ªØ li·ªáu. H·ªó tr·ª£ t·ªï ch·ª©c t√†i li·ªáu, s·∫Øp x·∫øp s·ª± ki·ªán.</p>
        <p><strong>·ªû nh√†:</strong>Th·ª±c h√†nh c√°c k·ªπ nƒÉng nh∆∞ s·ª≠ d·ª•ng ph·∫ßn m·ªÅm Excel, l√†m b√°o c√°o, ho·∫∑c qu·∫£n l√Ω ng√¢n s√°ch c√° nh√¢n. S·∫Øp x·∫øp ƒë·ªì ƒë·∫°c ngƒÉn n·∫Øp, l·∫≠p k·∫ø ho·∫°ch chi ti√™u ho·∫∑c l·ªãch tr√¨nh h·ªçc t·∫≠p chi ti·∫øt.</p>
        `,
  "Ngh·ªá thu·∫≠t": `<h3 class='title'>ƒê·∫∑c ƒëi·ªÉm c·ªßa nh·ªØng ng∆∞·ªùi thu·ªôc nh√≥m Ngh·ªá thu·∫≠t</h3>
        <p>∆Øa th√≠ch t·ª± do, y√™u c√°i ƒë·∫πp, tr√≠ t∆∞·ªüng t∆∞·ª£ng phong ph√∫...</p>
        <p><strong>ƒêi·ªÉm m·∫°nh:</strong> Tr√≠ t∆∞·ªüng t∆∞·ª£ng phong ph√∫, s√°ng t·∫°o: c√≥ khi·∫øu th·∫©m m·ªπ, c√≥ th·ªÉ ph·ªëi m√†u ho·∫∑c v·∫Ω, vi·∫øt, m·∫∑c ƒë·∫πp, nh·∫£y, ch∆°i nh·∫°c c·ª•,‚Ä¶.</p>
        <p><strong>ƒêi·ªÉm c·∫ßn kh·∫Øc ph·ª•c:</strong> B·∫°n tr·∫ª nh√≥m ngh·ªá thu·∫≠t th∆∞·ªùng th√≠ch l√†m nh·ªØng ƒëi·ªÅu kh√°c v·ªõi nh·ªØng ng∆∞·ªùi xung quanh, v√¨ v·∫≠y √≠t tu√¢n th·ªß theo lu·∫≠t l·ªá, n·ªÅ n·∫øp.</p>
        <p><strong>Ng√†nh ngh·ªÅ:</strong> Thi·∫øt k·∫ø ƒë·ªì h·ªça, ngo·∫°i ng·ªØ; thanh nh·∫°c, th·ªùi trang‚Ä¶</p>
        <p><strong>Tr·∫£i nghi·ªám ·ªü l·ªõp, tr∆∞·ªùng:</strong> L·ªõp ph√≥ vƒÉn th·ªÉ m·ªπ, l·ªõp ph√≥ vƒÉn ngh·ªá</p>
        <p><strong>C√°c m√¥n h·ªçc c·∫ßn ph√°t huy:</strong> M·ªπ thu·∫≠t, √¢m nh·∫°c, ng·ªØ vƒÉn,‚Ä¶</p>
        <p><strong>·ªû l·ªõp:</strong> S√°ng t√°c b√†i th∆°, b√†i vƒÉn ho·∫∑c b√†i h√°t trong c√°c ti·∫øt h·ªçc vƒÉn ho·∫∑c √¢m nh·∫°c. Tham gia bi·ªÉu di·ªÖn k·ªãch, v·∫Ω tranh minh h·ªça cho c√°c d·ª± √°n nh√≥m.</p>
        <p><strong>·ªû tr∆∞·ªùng:</strong> Tham gia c√°c c√¢u l·∫°c b·ªô m·ªπ thu·∫≠t, √¢m nh·∫°c, vƒÉn th∆°, ho·∫∑c s√¢n kh·∫•u. G√≥p ph·∫ßn t·ªï ch·ª©c c√°c ch∆∞∆°ng tr√¨nh ngh·ªá thu·∫≠t, tri·ªÉn l√£m ho·∫∑c s·ª± ki·ªán vƒÉn h√≥a.</p>
        <p><strong>·ªû nh√†:</strong>T·ª± luy·ªán t·∫≠p v·∫Ω, s√°ng t√°c nh·∫°c, vi·∫øt truy·ªán, l√†m ƒë·ªì th·ªß c√¥ng. Trang tr√≠ kh√¥ng gian s·ªëng ho·∫∑c h·ªçc thi·∫øt k·∫ø ƒë·ªì h·ªça.</p>
        `,
  "X√£ h·ªôi": `<h3 class='title'>ƒê·∫∑c ƒëi·ªÉm c·ªßa nh·ªØng ng∆∞·ªùi thu·ªôc nh√≥m X√£ h·ªôi</h3>
        <p>Th√≠ch gi√∫p ƒë·ª° ng∆∞·ªùi kh√°c, l√†m vi·ªác c·ªông ƒë·ªìng...</p>
        <p><strong>ƒêi·ªÉm m·∫°nh:</strong> Th·∫•u hi·ªÉu, c√≥ kh·∫£ nƒÉng v·ªÅ ng√¥n ng·ªØ, di·ªÖn ƒë·∫°t t·ªët √Ω t∆∞·ªüng truy·ªÅn ƒë·∫°t ki·∫øn th·ª©c, c√≥ kh·∫£ nƒÉng l·∫Øng nghe m·ªôt c√°ch ki√™n nh·∫´n.</p>
        <p><strong>ƒêi·ªÉm c·∫ßn kh·∫Øc ph·ª•c:</strong> Nh·∫°y c·∫£m, d·ªÖ b·ªã ·∫£nh h∆∞·ªüng b·ªüi c·∫£m x√∫c c·ªßa ng∆∞·ªùi kh√°c, d·ªÖ m·ªßi l√≤ng, hay che gi·∫•u s·ªü th√≠ch ho·∫∑c kh·∫£ nƒÉng th·∫≠t.</p>
        <p><strong>Ng√†nh ngh·ªÅ:</strong> C·ªë v·∫•n, lu·∫≠t s∆∞, qu·∫£ng c√°o marketing, du l·ªãch, d·ªãch v·ª• kh√°ch h√†ng,‚Ä¶</p>
        <p><strong>Tr·∫£i nghi·ªám ·ªü l·ªõp, tr∆∞·ªùng:</strong> D·ªãch v·ª• c·ªông ƒë·ªìng, d·ªãch v·ª• c√° nh√¢n</p>
        <p><strong>C√°c m√¥n h·ªçc c·∫ßn ph√°t huy:</strong> Gi√°o d·ª•c c√¥ng d√¢n, ng·ªØ vƒÉn, l·ªãch s·ª≠,‚Ä¶</p>
        <p><strong>·ªû l·ªõp:</strong> H·ªó tr·ª£ b·∫°n b√® trong h·ªçc t·∫≠p, l√†m nh√≥m tr∆∞·ªüng trong c√°c d·ª± √°n nh√≥m. Thuy·∫øt tr√¨nh ho·∫∑c h∆∞·ªõng d·∫´n b·∫°n b√® trong c√°c ho·∫°t ƒë·ªông h·ªçc t·∫≠p chung.</p>
        <p><strong>·ªû tr∆∞·ªùng:</strong> Tham gia ho·∫°t ƒë·ªông t√¨nh nguy·ªán, c√¢u l·∫°c b·ªô h·ªó tr·ª£ c·ªông ƒë·ªìng ho·∫∑c ƒë·ªôi h∆∞·ªõng d·∫´n h·ªçc sinh m·ªõi. T·ªï ch·ª©c ho·∫∑c tham gia c√°c bu·ªïi t∆∞ v·∫•n, giao l∆∞u k·ªπ nƒÉng m·ªÅm.</p>
        <p><strong>·ªû nh√†:</strong>H∆∞·ªõng d·∫´n ho·∫∑c gi√∫p ƒë·ª° em nh·ªè trong vi·ªác h·ªçc t·∫≠p. T·ªï ch·ª©c c√°c bu·ªïi tr√≤ chuy·ªán ho·∫∑c thuy·∫øt tr√¨nh trong gia ƒë√¨nh.</p>
        `,
  "Qu·∫£n l√Ω": `<h3 class='title'>ƒê·∫∑c ƒëi·ªÉm c·ªßa nh·ªØng ng∆∞·ªùi thu·ªôc nh√≥m Qu·∫£n l√Ω</h3>
        <p>Y√™u th√≠ch l√£nh ƒë·∫°o, thuy·∫øt ph·ª•c ng∆∞·ªùi kh√°c...</p>
        <p><strong>ƒêi·ªÉm m·∫°nh:</strong> Quy·∫øt ƒëo√°n, r·∫•t nƒÉng ƒë·ªông, tham v·ªçng, giao ti·∫øp t·ªët; ƒë∆∞·ª£c nhi·ªÅu ng∆∞·ªùi tin t∆∞·ªüng, n·ªÉ ph·ª•c. </li>
        <p><strong>ƒêi·ªÉm c·∫ßn kh·∫Øc ph·ª•c:</strong> Kh√¥ng th√≠ch, kh√¥ng c√≥ nƒÉng khi·∫øu trong vi·ªác ƒë·ªÉ √Ω ƒë·∫øn c√°c chi ti·∫øt.  </li>
        <p><strong>Ng√†nh ngh·ªÅ:</strong> Qu·∫£n l√≠ doanh nghi·ªáp; Marketing, qu·∫£n tr·ªã, qu·∫£n l√≠ trong c∆° quan nh√† n∆∞·ªõc, tr∆∞·ªùng h·ªçc;‚Ä¶</li>
        <p><strong>Tr·∫£i nghi·ªám ·ªü l·ªõp, tr∆∞·ªùng:</strong> L·ªõp ph√≥ h·ªçc t·∫≠p, l·ªõp tr∆∞·ªüng, ...</li>
        <p><strong>C√°c m√¥n h·ªçc c·∫ßn ph√°t huy:</strong> To√°n, ng·ªØ vƒÉn, tin h·ªçc, gi√°o d·ª•c c√¥ng d√¢n,‚Ä¶</p>
        <p><strong>·ªû l·ªõp:</strong> ƒê·ªÅ xu·∫•t √Ω t∆∞·ªüng v√† d·∫´n d·∫Øt nh√≥m trong c√°c d·ª± √°n ho·∫∑c b√†i t·∫≠p nh√≥m. T·ªï ch·ª©c th·∫£o lu·∫≠n, tranh bi·ªán, ho·∫∑c l·∫≠p k·∫ø ho·∫°ch h·ªçc t·∫≠p cho nh√≥m.</p>
        <p><strong>·ªû tr∆∞·ªùng:</strong> Tham gia c√¢u l·∫°c b·ªô kinh doanh, kh·ªüi nghi·ªáp ho·∫∑c ƒë·ªôi l√£nh ƒë·∫°o h·ªçc sinh. T·ªï ch·ª©c s·ª± ki·ªán, h·ªôi th·∫£o, ho·∫∑c c√°c bu·ªïi g√¢y qu·ªπ.</p>
        <p><strong>·ªû nh√†:</strong>Th·ª±c h√†nh k·ªπ nƒÉng thuy·∫øt tr√¨nh, l·∫≠p k·∫ø ho·∫°ch c√° nh√¢n ho·∫∑c d·ª± √°n nh·ªè t·∫°i nh√†. H·ªçc c√°c kh√≥a online v·ªÅ k·ªπ nƒÉng giao ti·∫øp, b√°n h√†ng, ho·∫∑c l√£nh ƒë·∫°o.</p>
        `,
};

let top3 = [];
let remainingGroups = [];

function displayDetails(groupsToShow, isInitialDisplay = true) {
  const resultContainer = document.getElementById("result");
  resultContainer.innerHTML = "";
  let currentDetailIndex = 0;

  function showDetail(index) {
    resultContainer.innerHTML = "";

    const [group] = groupsToShow[index];

    const detailDiv = document.createElement("div");
    detailDiv.classList.add("details-container");

    let pageContent = `<h2>Nh√≥m ${index + 1}: ${group}</h2> ${
      partDetails[group] || "<p>Th√¥ng tin chi ti·∫øt ch∆∞a ƒë∆∞·ª£c c·∫≠p nh·∫≠t.</p>"
    }`;
    if (index >= 3) {
      pageContent = `<h2>Nh√≥m ${index}: ${group}</h2> ${
        partDetails[group] || "<p>Th√¥ng tin chi ti·∫øt ch∆∞a ƒë∆∞·ª£c c·∫≠p nh·∫≠t.</p>"
      }`;
    }
    if (index === 3) {
      pageContent = `<h2>C√°c nh√≥m c√≤n l·∫°i</h2><p>C√°c nh√≥m ti·∫øp theo c√≤n l·∫°i c√≥ s·ªë ƒëi·ªÉm th·∫•p h∆°n 3 nh√≥m ƒë·∫ßu. Tuy nhi√™n b·∫°n c≈©ng c√≥ th·ªÉ kh√°m ph√° xem b·∫°n c√≥ ƒë·∫∑c ƒëi·ªÉm g√¨ v·ªõi c√°c nh√≥m ngh·ªÅ n√†y</p>`;
    }
    detailDiv.innerHTML = `${pageContent}
             <div class="navigation-container">
                ${
                  index > 0
                    ? '<button class="nav-button" id="prevButton">Quay l·∫°i</button>'
                    : ""
                }
                ${
                  index < groupsToShow.length - 1
                    ? '<button class="nav-button" id="quizNextButton">Ti·∫øp theo</button>'
                    : ""
                }
                  ${
                    index === 6
                      ? '<button class="nav-button" id="summaryBackButton">Quay l·∫°i k·∫øt qu·∫£</button>'
                      : ""
                  }
                ${
                  index === 6
                    ? '<button class="nav-button" id="showFormButton">Ti·∫øp theo</button>'
                    : ""
                }
            </div>
        `;

    resultContainer.appendChild(detailDiv);

    if (index > 0) {
      document.getElementById("prevButton").onclick = () =>
        showDetail(index - 1);
    }
    if (index < groupsToShow.length - 1) {
      document.getElementById("quizNextButton").onclick = () =>
        showDetail(index + 1);
    }
    if (index === groupsToShow.length - 1) {
      document.getElementById("showFormButton").onclick =
        displayCompletionScreen;
      document.getElementById("summaryBackButton").onclick = goBackToSummary;
    }
  }

  showDetail(currentDetailIndex);
}

function displayResult() {
  const resultContainer = document.getElementById("result");
  const resultText = document.getElementById("resultText");

  top3 = Object.entries(scores)
    .sort(([, a], [, b]) => b - a)
    .slice(0, 3);

  remainingGroups = Object.entries(scores)
    .sort(([, a], [, b]) => b - a)
    .slice(3);

  const predictionCorrect = top3.some(([part]) => part === selectedCareerGroup);

  resultText.innerHTML = `
        <h2>K·∫øt qu·∫£</h2>
        <br>
        <h5>Top 3 nh√≥m c√≥ ƒëi·ªÉm cao nh·∫•t:</h5>
        <br>
        ${top3
          .map(
            ([part, score], index) => `
            <div dis>
            <span style='min-width: 200px'>
            ${index + 1}. ${part}
            </span>
            <span>
            - <span style='color: #6a11cb'>${score}</span> ƒëi·ªÉm
            </span>
        </div>`
          )
          .join("<br>")}<br><br>
        D·ª± ƒëo√°n c·ªßa b·∫°n: ${
          selectedCareerGroup ? `Nh√≥m ${selectedCareerGroup}` : "Kh√¥ng ch·ªçn"
        }<br>
        ${predictionCorrect ? "D·ª± ƒëo√°n ch√≠nh x√°c!" : "D·ª± ƒëo√°n kh√¥ng ch√≠nh x√°c."}
        <div id="detailsButton" style='margin-top: 30px' class="nav-button">Xem chi ti·∫øt</div>
    `;

  resultContainer.style.display = "block";
  document.getElementById("detailsButton").onclick = () => {
    const allGroups = top3.concat(["Remaining"], remainingGroups);
    displayDetails(allGroups);
    handleNextStep("step__5", "step__6");
  };
  document.getElementById("quizSection").style.display = "none";
  document.getElementById("completionScreen").style.display = "none";
}

function goBackToSummary() {
  const details = document.querySelectorAll(".details-container");
  details.forEach((detail) => detail.remove());

  const resultText = document.getElementById("resultText");
  resultText.style.display = "block";

  const resultContainer = document.getElementById("result");
  resultContainer.style.display = "block";
  handleNextStep("step__5", "step__6");
  document.getElementById("quizSection").style.display = "none";
}

function clearScreen() {
  const allElements = document.querySelectorAll("body > .container");

  allElements.forEach((element) => element.remove());
}

function clearCompletionScreen() {
  const completionScreen = document.getElementById("completionScreen");
  if (completionScreen) {
    completionScreen.remove();
  }
}

function displayCompletionScreen() {
  document.getElementById("result").style.display = "none";
  document.getElementById("completionScreen").style.display = "block";
  handleNextStep("step__6", "step__7");
}

function submitResult() {
  const form = document.getElementById("resultForm");
  const formData = new FormData(form);
  const data = {};
  formData.forEach((value, key) => (data[key] = value));

  data.scores = JSON.stringify(scores);
  data.predictedCareer = selectedCareerGroup;
  data.preliminaryAnswer = preliminaryAnswer;

  fetch(
    "https://script.google.com/macros/s/AKfycbzlnfYsB5GIgJxueZU4fQmIenWrOt944h1dQH7a9RYxToPUzLV9KvNv0u6e9pjv0EngtA/exec",
    {
      method: "POST",
      body: JSON.stringify(data),
    }
  )
    .then((response) => {
      if (!response.ok) {
        throw new Error("Network response was not ok");
      }
      return response.json();
    })
    .then((data) => {

      if (data.status === "success") {
        // alert("K·∫øt qu·∫£ ƒë√£ ƒë∆∞·ª£c g·ª≠i th√†nh c√¥ng!");
        document.getElementById("completionScreen").style.display = "none";
        handleNextStep("step__7", "step__8");
      } else {
        // alert("C√≥ l·ªói khi g·ª≠i k·∫øt qu·∫£. Vui l√≤ng th·ª≠ l·∫°i.");
        document.getElementById("completionScreen").style.display = "none";
        handleNextStep("step__7", "step__8");
      }
    })
    .catch((error) => {
      console.error("Error:", error);
      // alert("C√≥ l·ªói khi g·ª≠i k·∫øt qu·∫£. Vui l√≤ng th·ª≠ l·∫°i.");
    });
}

document.getElementById("resultForm").addEventListener("submit", (event) => {
  event.preventDefault();
  submitResult();
});

document.querySelectorAll(".career-option").forEach((option) => {
  option.addEventListener("click", () => {
    selectedCareerGroup = option.getAttribute("data-group");
    document.getElementById("frontQuestion").style.display = "none";
    document.getElementById("openingScreen").style.display = "flex";
  });
});

function openChatGpt() {
  return window.open('https://chatgpt.com/g/g-676c3474fb1c8191bde8c0175368c2b6-huong-nghiep-ai', '_blank')
}
function tryAgain() {
  window.location.reload()
}

function toggleSettingsMenu() {
  const menu = document.getElementById("settingsMenu");
  menu.classList.toggle("hidden");
}

function changeFontStyle(event) {
  document.body.style.fontFamily = event.target.value;
}

function toggleThemeMode(event) {
  if (event.target.value === "dark") {
    document.body.style.backgroundColor = "#333";
    document.body.style.color = "#fff";
  } else {
    document.body.style.backgroundColor = "#f5f7fa";
    document.body.style.color = "#444";
  }
}

function changeFontSize(event) {
  currentFontSize = parseInt(event.target.value, 10);
  displayQuestion();
}

function retakeQuiz() {
  scores = parts.reduce((acc, part) => ({ ...acc, [part]: 0 }), {});
  currentQuestionIndex = 0;
  selectedCareerGroup = null;

  document.getElementById("result").style.display = "none";
  document.getElementById("frontQuestion").style.display = "none";
  document.getElementById("openingScreen").style.display = "none";
  document.getElementById("completionScreen").style.display = "none";
  document.getElementById("quizSection").style.display = "block";

  displayQuestion(); // Restart the quiz
}
function getElementByClassName(name) {
  return document.querySelector(`${name}`);
}

let currentStep = "step__1";

const bgImage = {
  step__1: [""],
  step__2: ["./images/Questions-pana.svg", "./images/Questions-amico.svg"],
  step__3: ["./images/engineer.svg", "./images/leader.svg"],
  step__4: ["", ""],
};

// Initialize quiz on page load

function handleNextStep(cur, tar) {
  currentStep = tar;
  const preStep = getElementByClassName(`.${cur}`);
  const nextStep = getElementByClassName(`.${tar}`);
  nextStep.classList.add("active");
  nextStep.classList.remove("animate__fadeIn");
  preStep.classList.add("animate__fadeOut");
  preStep.classList.remove("active");

  const firstStepBg = getElementByClassName(".center__bg");
  firstStepBg.style.display = "none";

  const stepBgLeft = getElementByClassName(".left__bg");
  const stepBgRight = getElementByClassName(".right__bg");

  stepBgLeft.setAttribute("src", bgImage[currentStep][0]);
  stepBgRight.setAttribute("src", bgImage[currentStep][1]);
  stepBgLeft.classList.add("active");
  stepBgRight.classList.add("active");
  if(!stepBgLeft.getAttribute('src') && !stepBgRight.getAttribute('src')) {
    stepBgLeft.classList.remove("active");
    stepBgRight.classList.remove("active");
  }
}

window.onload = () => {
  const statedBtn = document.querySelector(".get-started");
  statedBtn.addEventListener("click", () => {
    // fade to step 2
    handleNextStep("step__1", "step__2");
  });

  const questionStarteds = document.querySelectorAll(".question-started .btn");
  questionStarteds.forEach((item) => {
    item.addEventListener("click", () => {
      // fade to step 3
      handleNextStep("step__2", "step__3");
    });
  });

  // Display the initial preliminary question
  document.querySelectorAll(".preliminary-option").forEach((option) => {
    option.addEventListener("click", () => {
      preliminaryAnswer = option.getAttribute("data-answer");
      document.getElementById("preliminaryQuestion").style.display = "none";
      document.getElementById("frontQuestion").style.display = "block";
    });
  });
  displayOpeningScreen();

  const startButton = document.getElementById("startButton");
  startButton.onclick = () => {
    document.getElementById("openingScreen").style.display = "none";
    document.getElementById("quizSection").style.display = "block";
    displayQuestion();
  };
  audioPlayer = document.getElementById("audioPlayer");
  selectMusic();

  // End
  const reStarted = getElementByClassName('.re-started')
  reStarted.addEventListener('click', () => {
    window.location.reload();
  })
};

function displayOpeningScreen() {
  document.querySelectorAll(".career-option").forEach((option) => {
    option.addEventListener("click", () => {
      selectedCareerGroup = option.getAttribute("data-group");
      document.getElementById("frontQuestion").style.display = "none";
      document.getElementById("openingScreen").style.display = "flex";
      handleNextStep("step__3", "step__4");
    });
  });
}

let audioPlayer;
let isPlaying = false;

function selectMusic() {
  const musicSelect = document.getElementById("musicSelect");
  currentMusic = musicSelect.value;
  audioPlayer.src = currentMusic;
  createCustomControls();
}

function toggleAudio() {
  if (isPlaying) {
    audioPlayer.pause();
    isPlaying = false;
    document.getElementById("playPauseButton").textContent = "Play";
  } else {
    audioPlayer.play();
    isPlaying = true;
    document.getElementById("playPauseButton").textContent = "Pause";
  }
}

function adjustVolume() {
  audioPlayer.volume = document.getElementById("volumeControl").value;
}

function createCustomControls() {
  const customControlsDiv = document.getElementById("customAudioControls");
  customControlsDiv.innerHTML = `
        <button id="playPauseButton" onclick="toggleAudio()">Play</button>
        <input type="range" id="volumeControl" min="0" max="1" step="0.1" value="1" oninput="adjustVolume()">
    `;
}
